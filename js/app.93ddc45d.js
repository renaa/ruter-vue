(function(e){function t(t){for(var i,o,l=t[0],s=t[1],u=t[2],d=0,m=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);c&&c(t);while(m.length)m.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,l=1;l<n.length;l++){var s=n[l];0!==a[s]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},a={app:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/ruter-vue/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"01f3":function(e,t,n){"use strict";n("7981")},"034f":function(e,t,n){"use strict";n("85ec")},"1d36":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"StopPlace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stopPlace"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"topographicPlace"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:194}};n.loc.source={body:"query StopPlace($query: String!) {\r\n    stopPlace(query: $query) {\r\n      id\r\n      name {\r\n        value\r\n      }\r\n      topographicPlace{\r\n      name {\r\n        value\r\n      }\r\n    }\r\n  }\r\n}\r\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,t)})),e.definitions&&e.definitions.forEach((function(e){i(e,t)}))}var a={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function o(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,o=new Set,l=new Set;i.forEach((function(e){l.add(e)}));while(l.size>0){var s=l;l=new Set,s.forEach((function(e){if(!o.has(e)){o.add(e);var t=a[e]||new Set;t.forEach((function(e){l.add(e)}))}}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(function(){n.definitions.forEach((function(e){if(e.name){var t=new Set;i(e,t),a[e.name.value]=t}}))})(),e.exports=n,e.exports["StopPlace"]=o(n,"StopPlace")},"41ca":function(e,t,n){"use strict";n("f3c0")},4776:function(e,t,n){"use strict";n("c206")},5398:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("travel-planner")],1)},r=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"TravelPlanner"},[n("div",{staticClass:"label"},[e._v("Reiseplanlegger")]),n("div",{staticClass:"stopPlaceContainer"},[n("stop-place-selector",{attrs:{msg:"Fra",inputQuery:e.fromInput},on:{"select-place":function(t){e.fromId=t},"map-place":function(t){e.fromId=t}}}),n("stop-place-selector",{attrs:{msg:"Til",inputQuery:e.toInput},on:{"select-place":function(t){e.toId=t},"map-place":function(t){e.toId=t}}})],1),e.fromId&&e.toId?n("div",[n("trips",{attrs:{fid:e.fromId,tid:e.toId,now:e.getNowDate()}})],1):e._e()])},l=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stopPlaceSelector"},[n("div",{staticClass:"input-with-dropdown",on:{mouseup:e.setInputFocus}},[n("div",{staticClass:"input-box",class:{"input-area-focused":e.inputFocused}},[n("label",[e._v(e._s(e.msg)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"input",class:{"input-invalid-search-term":e.inputInvalidSearchTerm},domProps:{value:e.input},on:{keyup:function(t){return e.loadPlaces()},focus:function(t){e.inputFocused=!0},blur:function(t){return e.inputBlurHandler()},input:function(t){t.target.composing||(e.input=t.target.value)}}}),n("button",{attrs:{title:"bruk geolokasjon"},on:{click:function(t){return e.getGeoLocation()}}},[e._v("üéØ")]),n("button",{on:{click:function(t){e.hidemap=!e.hidemap}}},[e._v("üåç")])]),n("div",{staticClass:"suggestions",class:{"suggestions-focused":e.inputFocused}},[e.stopData&&e.stopData.stopPlace.length?n("ul",e._l(e.stopData.stopPlace,(function(t,i){return n("li",{key:t.id,staticClass:"place",class:{current:i==e.current},on:{click:function(n){return e.clickOnStopPlace(i,t.id,t)}}},[n("p",{staticClass:"placeName"},[e._v(e._s(t.name.value))]),n("p",{staticClass:"topologicalPlace"},[e._v(" "+e._s(t.topographicPlace.name.value)+" ")])])})),0):n("div",[e._v("no result from stop place query")])])]),e.hidemap?e._e():n("div",{staticClass:"map",staticStyle:{height:"500px"}},[n("l-map",{attrs:{zoom:e.zoom,center:e.center},on:{click:e.setMarker,"update:zoom":e.zoomUpdated,"update:center":e.centerUpdated,"update:bounds":e.boundsUpdated}},[n("l-tile-layer",{attrs:{url:e.url}}),n("l-marker",{attrs:{"lat-lng":e.markerLatLng,icon:e.icon}})],1)],1)])},u=[],c=(n("b0c0"),n("99af"),n("b680"),n("1d36")),d=n("2699"),m=n("a40a"),p=n("e11e"),f=n.n(p),v={props:["msg","inputQuery"],name:"getToAndFrom",created:function(){this.input=this.inputQuery,this.loadPlaces()},data:function(){return{input:"",inputInvalidSearchTerm:!1,inputFocused:!1,current:null,stopData:null,hidemap:!0,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:10,bounds:null,center:[59.87,10.66],markerLatLng:[59.87,10.66],icon:f.a.icon({iconUrl:n("f608"),iconSize:[18,30],iconAnchor:[9,30]})}},components:{LMap:d["a"],LTileLayer:m["a"]},methods:{setInputFocus:function(e){"button"!==e.composedPath()[0].localName&&(this.$refs.input.focus(),this.inputInvalidSearchTerm&&(this.input="",this.inputInvalidSearchTerm=!1))},clickOnStopPlace:function(e,t,n){this.current=e,this.$emit("select-place",t),this.markerLatLng=[0,0],this.updateInputField(n.name.value,!1)},inputBlurHandler:function(){var e=this;setTimeout((function(){e.inputFocused=!1}),200)},getGeoLocation:function(){var e=this;navigator.geolocation&&(this.current=null,navigator.geolocation.getCurrentPosition((function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};e.$emit("select-place",n),e.markerLatLng=n,e.updateInputField(e.prettyPrintGeo(n.lat,n.lng),!0)})))},updateInputField:function(e,t){this.input=e,this.inputInvalidSearchTerm=t},loadPlaces:function(){this.current=null,this.loadStopPlaces()},loadStopPlaces:function(){var e=this;this.$apollo.query({query:c["StopPlace"],variables:{query:this.input}}).then((function(t){e.stopData=t.data}))},zoomUpdated:function(e){this.zoom=e},centerUpdated:function(e){this.center=e},boundsUpdated:function(e){this.bounds=e},setMarker:function(e){this.current=null,this.markerLatLng=e.latlng,this.$emit("map-place",this.markerLatLng),this.updateInputField(this.prettyPrintGeo(e.latlng.lat,e.latlng.lng),!0)},prettyPrintGeo:function(e,t){return"lat:".concat(e.toFixed(3)," lng:").concat(t.toFixed(3))}}},g=v,k=(n("4776"),n("2877")),h=Object(k["a"])(g,s,u,!1,null,"dd3aa9a4",null),S=h.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Trips"},[e.resultData?n("div",[e.resultData&&e.resultData.trip&&e.resultData.trip.tripPatterns.length?n("ul",{staticClass:"trips-list"},e._l(e.resultData.trip.tripPatterns,(function(e,t){return n("li",{key:t,staticClass:"trip"},[n("trip",{attrs:{tripPattern:e}})],1)})),0):n("div",[e._v("entur returned nothing")])]):n("div",{staticClass:"loader"},[e._v("loading...")])])},b=[],N=n("53ca"),P=(n("d3b7"),n("25f0"),n("5cf0")),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"TripPattern"},[n("div",{staticClass:"leg"},[e._l(e.tripPattern.legs,(function(e,t){return n("div",{key:t},["foot"==e.mode?n("trip-stage",{attrs:{leg:e,icon:"üë£"}}):"bus"==e.mode?n("trip-stage",{attrs:{leg:e,icon:"üöå"}}):"rail"==e.mode?n("trip-stage",{attrs:{leg:e,icon:"üöÖ"}}):"tram"==e.mode?n("trip-stage",{attrs:{leg:e,icon:"üöã"}}):"metro"==e.mode?n("trip-stage",{attrs:{leg:e,icon:"üöá"}}):"coach"==e.mode?n("trip-stage",{attrs:{leg:e,icon:"üöê"}}):"water"==e.mode?n("trip-stage",{attrs:{leg:e,icon:"üö¢"}}):"air"==e.mode?n("trip-stage",{attrs:{leg:e,icon:"‚úàÔ∏è"}}):n("trip-stage",{attrs:{leg:e,icon:"‚ùì"}})],1)})),n("div",{staticClass:"summary"},[e._v(" "+e._s(e.getTime(e.tripPattern.endTime))+" ")])],2)])},_=[],w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"TripStage"},[n("div",{staticClass:"leg"},[n("div",[n("div",{staticClass:"grid-container"},[n("div",{staticClass:"grid-item"},[e._v(e._s(e.getTime(e.leg.expectedStartTime)))]),n("div",{staticClass:"grid-item"},[n("abbr",{attrs:{title:"Platform"}},[e._v(e._s(e.platform)+" ")])]),n("div",{staticClass:"grid-item"},[e._v(e._s(e.icon))]),n("div",{staticClass:"grid-item"},[e._v(e._s(e.legInfo))]),n("div",{staticClass:"grid-item"},[e._v("‚û°Ô∏è")]),n("div",{staticClass:"grid-item"},[e._v(e._s(e.leg.toPlace.name))])])])])])},F=[],C={props:["icon","leg"],name:"TripStage",methods:{getTime:function(e){return e.substring(11,19)}},data:function(){var e,t;return{platform:null!==(e=null===(t=this.leg.fromPlace.quay)||void 0===t?void 0:t.publicCode)&&void 0!==e?e:""}},computed:{legInfo:function(){var e;return null!==(e=this.leg.line)&&void 0!==e&&e.publicCode?this.leg.line.publicCode:this.leg.distance<1e3?Math.round(this.leg.distance)+"m":Math.round(this.leg.distance/1e3)+"km"}}},D=C,I=(n("41ca"),Object(k["a"])(D,w,F,!1,null,"30686f69",null)),O=I.exports,x={props:["tripPattern","icon"],name:"TripPattern",components:{TripStage:O},methods:{getTime:function(e){return e.substring(11,19)}}},q=x,L=(n("01f3"),Object(k["a"])(q,T,_,!1,null,"e96324f8",null)),E=L.exports,$={name:"Trips",props:["fid","tid","now"],components:{Trip:E},data:function(){return{resultData:null,fromQuery:null,toQuery:null}},apollo:{$client:"clientJourneyPlanner"},methods:{Search:function(){this.resultData=null,this.CreateQuery(),this.SearchWithQuery()},CreateQuery:function(){"string"==typeof this.fid?this.fromQuery={place:this.fid}:"object"==Object(N["a"])(this.fid)&&(this.fromQuery={coordinates:{latitude:this.fid.lat,longitude:this.fid.lng}}),"string"==typeof this.tid?this.toQuery={place:this.tid}:"object"==Object(N["a"])(this.tid)&&(this.toQuery={coordinates:{latitude:this.tid.lat,longitude:this.tid.lng}})},SearchWithQuery:function(){var e=this;this.$apollo.query({query:P["trip"],variables:{from:this.fromQuery,to:this.toQuery,nowDate:this.now.toString()}}).then((function(t){e.resultData=t.data}))},getTime:function(e){return e.substring(11,19)}},created:function(){this.Search()},watch:{fid:function(){this.Search()},tid:function(){this.Search()}}},j=$,Q=(n("f098"),Object(k["a"])(j,y,b,!1,null,"ef1602e4",null)),V=Q.exports,z={name:"getToAndFrom",components:{StopPlaceSelector:S,Trips:V},data:function(){return{fromInput:"teisen",toInput:"frogner",fromId:null,toId:null}},methods:{getNowDate:function(){var e=new Date;return e.toISOString()}}},A=z,M=(n("700b"),Object(k["a"])(A,o,l,!1,null,"14a5eb9a",null)),G=M.exports,U={name:"App",components:{TravelPlanner:G}},J=U,B=(n("034f"),Object(k["a"])(J,a,r,!1,null,null,null)),H=B.exports,W=n("2c82"),R=n("522d"),K=n("4e2b"),X=(n("6cc5"),new W["a"]({uri:"https://api.entur.io/stop-places/v1/graphql"})),Y=new W["a"]({uri:"https://api.entur.io/journey-planner/v2/graphql"}),Z=new R["a"]({clients:{clientStopPlace:X,clientJourneyPlanner:Y},defaultClient:X});i["a"].use(R["a"]),i["a"].component("l-map",d["a"]),i["a"].component("l-tile-layer",m["a"]),i["a"].component("l-marker",K["a"]),i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(H)},apolloProvider:Z}).$mount("#app")},"5cf0":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"trip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"from"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Location"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"to"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Location"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"dateTime"}},type:{kind:"NamedType",name:{kind:"Name",value:"DateTime"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"from"},value:{kind:"Variable",name:{kind:"Name",value:"from"}}},{kind:"Argument",name:{kind:"Name",value:"to"},value:{kind:"Variable",name:{kind:"Name",value:"to"}}},{kind:"Argument",name:{kind:"Name",value:"dateTime"},value:{kind:"Variable",name:{kind:"Name",value:"dateTime"}}},{kind:"Argument",name:{kind:"Name",value:"numTripPatterns"},value:{kind:"IntValue",value:"10"}},{kind:"Argument",name:{kind:"Name",value:"minimumTransferTime"},value:{kind:"IntValue",value:"180"}},{kind:"Argument",name:{kind:"Name",value:"walkSpeed"},value:{kind:"FloatValue",value:"1.3"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tripPatterns"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startTime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endTime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"walkDistance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"legs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aimedStartTime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"expectedStartTime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fromPlace"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"quay"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publicCode"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"toPlace"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"mode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"distance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publicCode"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:714}};n.loc.source={body:"query trip($from: Location! $to: Location! $dateTime: DateTime){\r\n    trip(\r\n      from: $from\r\n      to: $to\r\n      dateTime: $dateTime\r\n      numTripPatterns: 10\r\n      minimumTransferTime: 180\r\n      walkSpeed: 1.3\r\n    ) {\r\n      tripPatterns {\r\n        startTime\r\n        endTime\r\n        duration\r\n        walkDistance\r\n        legs {\r\n\r\n          aimedStartTime\r\n          expectedStartTime\r\n          \r\n          fromPlace {\r\n            name\r\n            quay{\r\n              publicCode\r\n            }\r\n          }\r\n          toPlace {\r\n            name\r\n          }\r\n          mode\r\n          distance\r\n          line {\r\n            id\r\n            publicCode\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,t)})),e.definitions&&e.definitions.forEach((function(e){i(e,t)}))}var a={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function o(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,o=new Set,l=new Set;i.forEach((function(e){l.add(e)}));while(l.size>0){var s=l;l=new Set,s.forEach((function(e){if(!o.has(e)){o.add(e);var t=a[e]||new Set;t.forEach((function(e){l.add(e)}))}}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(function(){n.definitions.forEach((function(e){if(e.name){var t=new Set;i(e,t),a[e.name.value]=t}}))})(),e.exports=n,e.exports["trip"]=o(n,"trip")},"675e":function(e,t,n){},"700b":function(e,t,n){"use strict";n("675e")},7981:function(e,t,n){},"85ec":function(e,t,n){},c206:function(e,t,n){},f098:function(e,t,n){"use strict";n("5398")},f3c0:function(e,t,n){},f608:function(e,t,n){e.exports=n.p+"img/map-marker.7feb7544.png"}});
//# sourceMappingURL=app.93ddc45d.js.map